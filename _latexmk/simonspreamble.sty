%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%% SIMON's preamble %%%%%%%%%%%%%%%%%%%%%%%
\ProvidesClass{simonspreamble}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Version 21072025, UiO Oslo, Norway, for pdfLaTeX %%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Since SYMBOLS// are PDF1.6, so must main.pdf be %%%%%%%%%%%%%%
\pdfminorversion = 6
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% WARNINGS %%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{silence}
\WarningFilter{latexfont}{Size substitutions with differences}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This warning is a result of the xfrac package, and is ignored%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% LANGUAGE %%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[X2,TS1,T1]{fontenc}
\RequirePackage[russian, greek, english]{babel}
\RequirePackage{lmodern}
\DeclareFontFamilySubstitution{X2}{lmr}{cmr}
\DeclareFontSubstitution{X2}{cmtt}{m}{it}
\RequirePackage{textalpha}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% T1 main font, so X2&TS1 must be loaded before T1. lmodern is %
% a better font option than cmodern, but has worse selection. %%
% I have decided X2 is the better option over T2x encoding. %%%%
% TS1 is for Chinese & Japanese language support %%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%% TYPESETTING PRETTIFYING %%%%%%%%%%%%%%%%%%%%
\RequirePackage{mathtools}
\RequirePackage{scalerel}
%%%%%%%%%%%% Scaled down \in symbol for subscripts %%%%%%%%%%%%%
\newcommand{\smallerrel}[1]{%
    \mathrel{\mathpalette\smallerrelaux{#1}}}
\newcommand{\smallerrelaux}[2]{%
    \raisebox{.1ex}{\scalebox{.75}{$#1#2$}}}
\newcommand{\smallin}{\smallerrel{\in}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%% PAGE LAYOUT SETTINGS %%%%%%%%%%%%%%%%%%%%%
\RequirePackage{fancyhdr}
\RequirePackage{titling}
\RequirePackage{lastpage}
\RequirePackage{geometry}
\geometry{a4paper, margin=1in}
\RequirePackage{changepage}
\newcommand{\subtitle}[1]{%
  \posttitle{%
    \par\end{center}
    \begin{center}\large#1\end{center}
    \vskip .5em}}
\setcounter{secnumdepth}{0}
\pagestyle{fancy}
\cfoot{}
\rfoot{Page \thepage \hspace{1pt} of \pageref{LastPage}}
\lhead{\textit{\headcourse}}
\chead{\headtitle}
\RequirePackage{dblfnote}
\DFNalwaysdouble
\RequirePackage{perpage}
\MakePerPage{footnote}
\RequirePackage{wrapfig}
\newcommand{\wrapfill}{\par\ifnum\value{WF@wrappedlines}>0
  \addtocounter{WF@wrappedlines}{-1}%
  \null\vspace{\arabic{WF@wrappedlines}\baselineskip}%
  \WFclear
\fi}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% OTHER LAYOUT %%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{enumerate}
\RequirePackage{listings}
\RequirePackage{caption}
\RequirePackage{floatrow}
\RequirePackage{sidecap}
\RequirePackage{subfiles}
\RequirePackage{multicol}
\RequirePackage{csquotes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%% MATH TYPESETTING PACKAGES %%%%%%%%%%%%%%%%%%%
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage{amssymb}
\RequirePackage{bm}
\RequirePackage{xfrac}
\RequirePackage{tensor}
\RequirePackage{mathrsfs}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%% Pi-theorem Matrix %%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{nicematrix}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% PHYSICS %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[version=4]{mhchem}
\RequirePackage{siunitx}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% GRAPHICS %%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{graphicx}
\RequirePackage{subcaption}
\RequirePackage{tikz}
\usetikzlibrary{patterns, 3d, arrows, perspective,%
    calc, bending, positioning}
\RequirePackage[outline]{contour}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%% Figures for two columns %%%%%%%%%%%%%%%%%%%%
\newenvironment{Figure}
  {\par\medskip\noindent\minipage{\linewidth}}
  {\endminipage\par\medskip}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%% CODE/PROGRAMMING TYPESETTING (MATLAB) %%%%%%%%%%%%
\RequirePackage[numbered,framed]{matlab-prettifier}
\RequirePackage{algorithm}
\RequirePackage{algpseudocode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% BIBLIOGRAPHY %%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[language = auto,%
    autolang = other,%
    bibencoding = utf8,%
    backend = biber]{biblatex}
\renewcommand*{\mkbibnamefamily}[1]{\textsc{#1}}
\DeclareNameAlias{author}{family-given}
\addbibresource{bibliography.bib}
\WarningFilter{biblatex}{Patching footnotes failed}
%%%%%%%%%%%%%%%%%%%%%%%%% REFERENCING %%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter\disable@package@load{auxhook}{}\makeatother
\RequirePackage{hyperref}
\hypersetup{
    colorlinks,
    linkcolor={black},
    citecolor={black},
    urlcolor={black}
}
\RequirePackage{cleveref}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{ifthen}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% MATHEMATICS %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%% THEOREM ENVIRONMENTS %%%%%%%%%%%%%%%%%%%%%
\newtheorem*{theorem}{Theorem}
\newtheorem*{proposition}{Proposition}
\theoremstyle{definition}
\newtheorem*{definition}{Definition}
\newtheorem*{corollary}{Corollary}
\newtheorem*{lemma}{Lemma}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% ANALYSIS %%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%% epsilon %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\let\hideousepsilon\epsilon
\let\epsilon\varepsilon
%%%%%%%%%%%%%%%%%%%%%%% differentials %%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\dee}{\mathrm{d}}
\newcommand{\Dee}{\mathrm{D}}
\newcommand{\deex}{\partial_x}
\newcommand{\deey}{\partial_y}
\newcommand{\deez}{\partial_z}
\newcommand{\deer}{\partial_r}
\newcommand{\deeth}{\partial_{\theta}}
\newcommand{\deet}{\partial_t}
\newcommand{\deetau}{\partial_{\tau}}
\newcommand{\deexi}{\partial_{\xi}}
\newcommand{\deezeta}{\partial_{\zeta}}
\newcommand{\deexxi}{\partial_{x\xi}}
\newcommand{\deexz}{\partial_{xz}}
%%%%%%%%%%%%%%%%% mathrm-type operators %%%%%%%%%%%%%%%%%%%%%%%%
\DeclareMathOperator{\adv}{adv}
\DeclareMathOperator{\dive}{div}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\trace}{tr}
\DeclareMathOperator{\legendre}{P}
\DeclareMathOperator{\erf}{erf}
\DeclareMathOperator{\erfc}{erfc}
\DeclareMathOperator{\green}{G}
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Log}{Log}
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\ellK}{K}
\DeclareMathOperator{\ellE}{E}
\DeclareMathOperator{\ellF}{F}
%%%%%%%%%%%%%%%%%%%%%% paired delimiters %%%%%%%%%%%%%%%%%%%%%%%
\DeclarePairedDelimiter\bracc\{\}
\DeclarePairedDelimiter{\innerprod}{\langle}{\rangle}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter\absl\lvert\rvert
\newcommand{\eqdef}{\overset{\mathrm{def}}{=\joinrel=}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%% TENSORS & VECTORS %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%% HANDY %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\uvec}{\bm{u}}
\newcommand{\xvec}{\bm{x}}
\newcommand{\eye}{\mathfrak{d}}
\newcommand{\jacobi}[1]{\bm{\mathfrak{J}_{#1}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%% PHYSICAL %%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\stress}{\bm{\mathfrak{P}}}
\newcommand{\strain}{\bm{\mathfrak{e}}}
\newcommand{\addedmass}{\bm{\mathfrak{m}}}
\newcommand{\gravity}{\mathrm{g}}
\newcommand{\vgravity}{\mathbf{g}}
\newcommand{\youngsmodulus}{\mathrm{E}}
%%%%%%%%%%%%%%%%%%%%%%%%% UNIT VECTORS %%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\ihat}{\bm{\hat{\imath}}}
\newcommand{\jhat}{\bm{\hat{\jmath}}}
\newcommand{\khat}{\bm{\hat{k}}}
\newcommand{\ehat}{\bm{\hat{e}}}
\newcommand{\uhat}{\bm{\hat{u}}}
\newcommand{\zhat}{{\hat{z}}}
\newcommand{\nhat}{\bm{\hat{n}}}
\newcommand{\rhat}{\boldsymbol{\hat{\kaufmannr}}}
\newcommand{\tehat}{\boldsymbol{\hat{\vartheta}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%% DISCRETE NOTATION %%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\xtt}{{\textit{\texttt{x}}}}
\newcommand{\ytt}{{\textit{\texttt{y}}}}
\newcommand{\ztt}{{\textit{\texttt{z}}}}
\newcommand{\ttt}{{\textit{\texttt{t}}}}
\newcommand{\deltt}{{\mathtt{{\Delta t}}}}
\newcommand{\utt}{\textit{\texttt{u}}}
\newcommand{\htt}{\textit{\texttt{h}}}
\newcommand{\nhattt}{\hat{\texttt{\textit{n}}}}
\newcommand{\naturals}{\mathbb{N}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% DIMONESIONLESS OR OTHERWISE NAMED NUMBERS %%%%%%%%%%%
\newcommand{\Ekman}{\mathrm{Ek}}
\newcommand{\Euler}{\mathrm{Eu}}
\newcommand{\Stokes}{\mathrm{Stk}}
\newcommand{\Reynolds}{\mathrm{Re}}
\newcommand{\Rossby}{\mathrm{Ro}}
\newcommand{\Courant}{\mathrm{Co}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%% NON-STANDARD MATH SYMBOLS %%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%% CUSTOM SYMBOLS %%%%%%%%%%%%%%%%%%%%%%%%
%%%% POLAR R %%%%
\newcommand{\kaufmannr}{\mathchoice
  {\mbox{$\resizebox{1ex}{1ex}{%
        \includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}
  {\mbox{$\resizebox{1ex}{1ex}{%
        \includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}
  {\scalebox{.7}{\mbox{$\resizebox{1ex}{1ex}{%
          \includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}}
  {\scalebox{.5}{\mbox{$\resizebox{1ex}{1ex}{%
          \includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}}
}
%%%% THETA TYPEWRITER %%%%
\newcommand{\Thetatt}{\texttt{\textTheta}}
\newcommand{\thetatt}{\texttt{\texttheta}}
%%%% phi TYPEWRITER %%%%
\newcommand{\phitt}{\texttt{\textit{\textphi}}}
%%%% delta TELETYPE %%%%
\newcommand{\deltatt}{\texttt{\textit{\textdelta}}}
\newcommand{\dxtt}{\texttt{\textit{\textdelta{x}}}}
%%%% DISPLACED VOLUME %%%%
\newcommand{\displacedvolume}{\mathchoice
  {\mbox{$\resizebox{.7em}{.75em}{%
        \includegraphics{SYMBOLS/Va.pdf}}$}}
  {\mbox{$\resizebox{.7em}{.75em}{%
        \includegraphics{SYMBOLS/Va.pdf}}$}}
  {\scalebox{.7}{\mbox{$\resizebox{.7em}{.75em}{%
          \includegraphics{SYMBOLS/Va.pdf}}$}}}
  {\scalebox{.5}{\mbox{$\resizebox{.7em}{.75em}{%
          \includegraphics{SYMBOLS/Va.pdf}}$}}}
}
%%%%%%%% OTHAL %%%%%%%%
\newcommand{\Othal}{\mathchoice
  {\raisebox{-.1em}{\mbox{$\resizebox{.72em}{.8em}{%
          \includegraphics{SYMBOLS/Othal.pdf}}$}}}
  {\raisebox{-.1em}{\mbox{$\resizebox{.72em}{.8em}{%
          \includegraphics{SYMBOLS/Othal.pdf}}$}}}
  {\raisebox{-0.1em}{\scalebox{.7}{\mbox{%
          $\resizebox{.72em}{.8em}{%
            \includegraphics{SYMBOLS/Othal.pdf}}$}}}}
  {\raisebox{-0.1em}{\scalebox{.5}{\mbox{%
          $\resizebox{.72em}{.8em}{%
            \includegraphics{SYMBOLS/Othal.pdf}}$}}}}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% RUSSIAN MATH %%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%% de %%%%%%%%
\newcommand{\rde}{\foreignlanguage{russian}{\textit{д}}}
%%%%%%%% DE %%%%%%%%
\newcommand{\rDe}{\foreignlanguage{russian}{\text{Д}}}
%%%%%%%% che %%%%%%%%
\newcommand{\che}{\foreignlanguage{russian}{\textit{ч}}}
%%%%%%%% BOLD che %%%%%%%%
\newcommand{\bche}{\foreignlanguage{russian}{%
    \textbf{\textit{ч}}}}
%%%%%%%% CHE %%%%%%%%
\newcommand{\Che}{\foreignlanguage{russian}{\textit{Ч}}}
%%%%%%%% DZHE %%%%%%%%
\newcommand{\Dzhe}{\foreignlanguage{russian}{\text{Џ}}}
%%%%%%%% ZHE %%%%%%%%
\newcommand{\zhe}{\foreignlanguage{russian}{\textit{ж}}}
%%%%%%%% BOLD ZHE %%%%%%%%
\newcommand{\bzhe}{\foreignlanguage{russian}{%
    \textbf{\textit{ж}}}}
%%%%%%%% TELETYPE ZHE %%%%%%%%
\newcommand{\zhett}{\foreignlanguage{russian}{%
    \texttt{\textit{ж}}}}
%%%%%%%% ZE %%%%%%%%
\newcommand{\ze}{\foreignlanguage{russian}{\textit{з}}}
%%%%%%%% EZH %%%%%%%%
\newcommand{\ezh}{\foreignlanguage{russian}{\textit{ӡ}}}
%%%%%%%% ZHWE (ꚅ) %%%%%%%%
% \DeclareUnicodeCharacter{A685}{ꚅ}
% \newcommand{\zhwe}{\textit{\textcyrillic{ꚅ}}}
%%%%%%%% ABKHAZ HA %%%%%%%%
\newcommand{\abha}{\foreignlanguage{russian}{\textit{ҩ}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
